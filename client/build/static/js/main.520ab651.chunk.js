(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{67:function(e,t,c){},68:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(19),r=c.n(a),o=c(13),s=c.n(o),i=c(16),l=c(2),u=c(14),j=c(6),d=c(5),p=c.n(d),m=c(0),b=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(""),o=Object(l.a)(r,2),s=o[0],i=o[1];return Object(m.jsx)("div",{id:"login",children:Object(m.jsxs)("form",{action:"#",onSubmit:function(e){e.preventDefault(),p()({method:"post",url:"".concat("http://localhost:5000/","api/auth/login"),data:{email:c,password:s}}).then((function(e){e.data.errors?console.log(e.data):(window.localStorage.setItem("id",e.data.userId),window.localStorage.setItem("token",e.data.token),window.location="/post")})).catch((function(e){return console.log(e)}))},children:[Object(m.jsx)("h2",{children:"Identifiez-vous"}),Object(m.jsx)("div",{className:"login-borderBottom"}),Object(m.jsx)("label",{htmlFor:"email"}),Object(m.jsx)("input",{id:"email",type:"email",name:"email",placeholder:"Adresse e-mail",value:c,onChange:function(e){return a(e.target.value)}}),Object(m.jsx)("div",{className:"error"}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{htmlFor:"password"}),Object(m.jsx)("input",{id:"password",className:"input",type:"password",name:"password",placeholder:"Mot de passe",value:s,onChange:function(e){return i(e.target.value)}}),Object(m.jsx)("div",{className:"error"}),Object(m.jsx)("input",{id:"login",type:"submit",value:"Connexion",className:"button green-button"})]})})},O=c(35),h=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(""),o=Object(l.a)(r,2),u=o[0],j=o[1],d=Object(n.useState)(""),h=Object(l.a)(d,2),f=h[0],x=h[1],g=Object(n.useState)(""),v=Object(l.a)(g,2),N=v[0],y=v[1],w=Object(n.useState)(""),S=Object(l.a)(w,2),C=S[0],k=S[1],I=function(){var e=Object(i.a)(s.a.mark((function e(t){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(c=document.querySelector(".confirmPassword")).innerHTML=" ",N!==C?c.innerHTML="Les mots de passes ne correspondent pas":p()({method:"post",url:"".concat("http://localhost:5000/","api/auth/signup"),data:{username:u,email:f,password:N}}).then((function(e){e.data.errors||a(!0)})).catch((function(e){var t,c=Object(O.a)(e.response.data.errors);try{for(c.s();!(t=c.n()).done;){var n=t.value;document.querySelector(".error.".concat(n.param)).innerHTML=n.msg}}catch(e){c.e(e)}finally{c.f()}console.log(e.response.data)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{id:"login registration",children:c?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(b,{}),Object(m.jsxs)("h4",{children:["Enregistrement r\xe9ussi !",Object(m.jsx)("br",{}),"Veuillez vous connect\xe9"]})]}):Object(m.jsxs)("form",{onSubmit:I,action:"",children:[Object(m.jsx)("h2",{children:"Inscription"}),Object(m.jsx)("div",{className:"login-borderBottom"}),Object(m.jsx)("label",{htmlFor:"username"}),Object(m.jsx)("input",{id:"username",type:"text",name:"username",placeholder:"Nom",onChange:function(e){return j(e.target.value)},value:u}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{htmlFor:"email"}),Object(m.jsx)("input",{id:"email",type:"email",name:"email",placeholder:"Adresse e-mail",onChange:function(e){return x(e.target.value)},value:f}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{htmlFor:"password"}),Object(m.jsx)("input",{id:"password",type:"password",name:"password",placeholder:"Mot de passe",onChange:function(e){return y(e.target.value)},value:N}),Object(m.jsx)("div",{className:"error"}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{htmlFor:"password"}),Object(m.jsx)("input",{type:"password",name:"password",className:"confirmPassword",placeholder:"Confirmer mot de passe",onChange:function(e){return k(e.target.value)},value:C}),Object(m.jsx)("div",{className:"error"}),Object(m.jsx)("input",{type:"submit",value:"S'inscrire",className:"button green-button"})]})})},f=function(e){var t=Object(n.useState)(e.signup),c=Object(l.a)(t,2),a=c[0],r=c[1],o=Object(n.useState)(e.signin),s=Object(l.a)(o,2),i=s[0],u=s[1],j=function(e){"signup"===e.target.id?(u(!1),r(!0)):"signin"===e.target.id&&(r(!1),u(!0))};return Object(m.jsxs)("div",{id:"form-container",children:[Object(m.jsxs)("div",{className:"form-home-link",children:[Object(m.jsx)("p",{id:"signin",className:"link",onClick:j,children:"S'identifier"}),Object(m.jsx)("p",{id:"signup",className:"link",onClick:j,children:"Cr\xe9er un compte"})]}),i&&Object(m.jsx)(b,{}),a&&Object(m.jsx)(h,{})]})},x=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("main",{id:"main-log",children:[Object(m.jsxs)("div",{id:"log-presentation",children:[Object(m.jsx)("img",{src:"logo/imgentreprise.jpg",alt:"bureau avec des ordinateurs"}),Object(m.jsx)("div",{className:"log-box"}),Object(m.jsx)("h1",{children:"Bienvenue sur votre premier r\xe9seau social d'entreprise"})]}),Object(m.jsx)(f,{signin:!0,signup:!1})]})})},g=c(3),v="GET_ALL_POSTS",N="UPDATE_POST",y="DELETE_POST",w="UPDATE_IMG_POST",S="EDIT_COMMENT",C="DELETE_COMMENT",k=function(e){return function(t){return p.a.get("".concat("http://localhost:5000/","api/post/")).then((function(c){var n=c.data.posts.slice(0,e);t({type:v,payload:n})})).catch((function(e){return console.log(e)}))}},I=function(e,t){var c=localStorage.getItem("token");return function(n){return p()({method:"post",url:"".concat("http://localhost:5000/","api/post/").concat(t),headers:{Authorization:"Bearer ".concat(c)},data:e})}},P=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},E=function(e){var t=Date.parse(e);return new Date(t).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit",year:"numeric",month:"short",day:"numeric"}).toString()},U=function(e){var t=e.comment,c=e.postId,a=Object(n.useState)(!1),r=Object(l.a)(a,2),o=r[0],s=r[1],i=Object(n.useState)(!1),u=Object(l.a)(i,2),j=u[0],d=u[1],b=Object(n.useState)(""),O=Object(l.a)(b,2),h=O[0],f=O[1],x=Object(g.b)(),v=Object(g.c)((function(e){return e.userReducer}));return Object(n.useEffect)((function(){v.id===t.userId&&s(!0)}),[v.id,t.userId]),Object(m.jsxs)("div",{children:[o&&!1===j&&Object(m.jsxs)("div",{className:"editDelete-comment",children:[Object(m.jsx)("p",{className:"date-comment",children:E(t.createdAt)}),Object(m.jsx)("p",{onClick:function(){return d(!j)},children:"Modifier"}),Object(m.jsx)("p",{onClick:function(){x(function(e,t){var c=localStorage.getItem("token");return function(n){return p()({method:"delete",url:"".concat("http://localhost:5000/","api/comment/").concat(e),headers:{Authorization:"Bearer ".concat(c)},data:{commentId:e}}).then((function(c){n({type:C,payload:{commentId:e,postId:t}})})).catch((function(e){return console.log(e)}))}}(t.id,c))},children:"Supprimer"})]}),o&&j&&Object(m.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault(),h&&(x(function(e,t){var c=localStorage.getItem("token");return function(n){return p()({method:"put",url:"".concat("http://localhost:5000/","api/comment/").concat(e),headers:{Authorization:"Bearer ".concat(c)},data:{comment:t}}).then((function(c){n({type:S,payload:{comment:t,commentId:e}})})).catch((function(e){return console.log(e)}))}}(t.id,h)),f(" "),d(!1))},children:[Object(m.jsx)("label",{htmlFor:"text",className:"close-editcomment",onClick:function(){return d(!j)},children:"\u2715"}),Object(m.jsx)("textarea",{onChange:function(e){return f(e.target.value)},defaultValue:t.comment}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"submit",value:"Valider modification",className:"button"})]})]})},F=function(e){var t=e.post,c=Object(n.useState)(""),a=Object(l.a)(c,2),r=a[0],o=a[1],s=Object(g.c)((function(e){return e.userReducer})),i=Object(g.c)((function(e){return e.usersReducer})),u=Object(g.b)();return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("article",{id:"article-comment",children:[t.Comments.map((function(e){return Object(m.jsxs)("div",{className:"container-comments",children:[Object(m.jsxs)("div",{className:e.userId===s.id?"containerComment-User":"containerComment-client",children:[Object(m.jsx)("div",{className:"profileUser-comment",children:Object(m.jsxs)("div",{className:"userImgName-comment",children:[Object(m.jsx)("img",{className:"pictureUser-comment",alt:"profil",src:!P(i[0])&&i.map((function(t){return t.id===e.userId?t.imageUrlUser:null})).join("")}),Object(m.jsx)("h4",{children:e.User.username})]})}),Object(m.jsx)("p",{className:"text-comment",children:e.comment})]}),Object(m.jsx)(U,{post:t,comment:e})]},e.id)})),s.id&&Object(m.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault(),r&&u(function(e,t,c,n){var a=localStorage.getItem("token");return function(r){return p()({method:"post",url:"".concat("http://localhost:5000/","api/comment/").concat(e),headers:{Authorization:"Bearer ".concat(a)},data:{commentId:t,comment:c,userComment:n}}).then((function(t){r({type:"ADD_COMMENT",payload:{postId:e}})})).catch((function(e){return console.log(e)}))}}(t.id,s.id,r,s.username)).then((function(){return u(k())})).then((function(){return o("")}))},className:"formComment",children:[Object(m.jsx)("textarea",{id:"textarea-comment",name:"comment",placeholder:"Laisser un commentaire...",onChange:function(e){return o(e.target.value)},value:r}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"submit",value:"Envoyer",className:"button SendComment-button"})]})]})})},D=function(e){var t=Object(g.b)(),c=function(c){return t((n=e.id,function(e){return p()({method:"delete",url:"".concat("http://localhost:5000/","api/post/").concat(n)}).then((function(t){e({type:y,payload:{postId:n}})})).catch((function(e){return console.log(e)}))}));var n};return Object(m.jsx)("div",{onClick:function(){window.confirm("Voulez-vous supprimer cet article?")&&c()},children:Object(m.jsx)("i",{className:"far fa-trash-alt"})})},T=function(e){var t=e.post,c=Object(n.useState)(!0),a=Object(l.a)(c,2),r=a[0],o=a[1],s=Object(g.c)((function(e){return e.userReducer})),i=Object(g.c)((function(e){return e.usersReducer})),u=Object(n.useState)(!1),j=Object(l.a)(u,2),d=j[0],b=j[1],O=Object(n.useState)(null),h=Object(l.a)(O,2),f=h[0],x=h[1],v=Object(n.useState)(!1),y=Object(l.a)(v,2),S=y[0],C=y[1],k=Object(n.useState)(""),I=Object(l.a)(k,2),U=I[0],T=I[1],R=Object(n.useState)(!1),A=Object(l.a)(R,2),L=A[0],M=A[1],_=Object(g.b)();return Object(n.useEffect)((function(){!P(i[0])&&o(!1)}),[i]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("article",{className:"article-post",children:[r?Object(m.jsx)("i",{className:"fas fa-spinner fa-spin"}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"header-post",children:[Object(m.jsxs)("div",{className:"header-post-user",children:[Object(m.jsx)("img",{className:"picture pictureUser-post",alt:"de profil",src:!P(i[0])&&i.map((function(e){return e.id===t.User.id?e.imageUrlUser:null})).join("")}),Object(m.jsx)("h3",{children:!P(i[0])&&i.map((function(e){return e.id===t.User.id?e.username:null})).join("")})]}),s.id===t.User.id&&Object(m.jsxs)("div",{className:"container-editDelete-post",children:[Object(m.jsx)(D,{id:t.id}),Object(m.jsx)("div",{onClick:function(){return b(!d)},children:Object(m.jsx)("i",{className:"far fa-edit"})}),Object(m.jsxs)("form",{action:"",onSubmit:function(){U&&_(function(e,t){return function(c){var n=new FormData;return n.append("image",t),p()({method:"put",url:"".concat("http://localhost:5000/","api/post/").concat(e,"/image"),data:n}).then((function(e){c({type:w,payload:n})})).catch((function(e){return console.log(e)}))}}(t.id,U))},children:[Object(m.jsx)("label",{htmlFor:"image",children:!1===L&&Object(m.jsx)("div",{children:Object(m.jsx)("i",{className:"far fa-images"})})}),Object(m.jsx)("input",{type:"file",id:"image",name:"image",accept:".jpg, .jpeg, .png",className:"input-file",onChange:function(e){return T(e.target.files[0])},onClick:function(){return M(!L)}}),L&&Object(m.jsx)("input",{type:"submit",value:"Envoyer",className:"sendUpdatePicture-user"})]})]})]}),Object(m.jsx)("div",{className:"container-datePost",children:Object(m.jsx)("p",{children:E(t.createdAt)})}),!1===d&&Object(m.jsxs)("div",{children:[Object(m.jsx)("h4",{children:t.titre}),Object(m.jsx)("p",{children:t.message})]}),t.imageUrlPost&&Object(m.jsx)("img",{className:"img-post",src:t.imageUrlPost,alt:"de la publication"}),Object(m.jsx)("p",{className:"video",children:t.video&&Object(m.jsx)("iframe",{width:"500",height:"300",src:t.video,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:t.id,"ng-show":"showvideo"})})]}),Object(m.jsx)("p",{className:"block-comments",children:Object(m.jsx)("i",{className:"far fa-comment",onClick:function(){return C(!S)},children:t.Comments.length})}),S&&Object(m.jsx)(F,{post:t})]},t.id),d&&Object(m.jsx)("article",{className:"article-popup  style-popup",children:Object(m.jsxs)("div",{className:"container-popup",children:[Object(m.jsx)("span",{className:"close-popup",onClick:function(){return b(!1)},children:"\u2715"}),Object(m.jsxs)("div",{className:"textPopup",children:[Object(m.jsx)("textarea",{defaultValue:t.message,onChange:function(e){return x(e.target.value)}}),Object(m.jsx)("p",{className:"video",children:t.video&&Object(m.jsx)("iframe",{width:"500",height:"300",src:t.video,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:t.id,"ng-show":"showvideo"})}),Object(m.jsx)("button",{className:"button green-button",onClick:function(){var e,c;f&&_((e=t.id,c=f,function(t){return p()({method:"put",url:"".concat("http://localhost:5000/","api/post/").concat(e),data:{message:c}}).then((function(n){t({type:N,payload:{message:c,postId:e}})})).catch((function(e){return console.log(e)}))})),b(!1)},children:"Valider modification"})]})]})})]})},R=function(){var e=Object(n.useState)(5),t=Object(l.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!0),o=Object(l.a)(r,2),s=o[0],i=o[1],u=Object(g.b)(),j=Object(g.c)((function(e){return e.postReducer})),d=function(){window.innerHeight+document.documentElement.scrollTop+1>document.scrollingElement.scrollHeight&&i(!0)};return Object(n.useEffect)((function(){return s&&(u(k(c)),i(!1),a(c+5)),window.addEventListener("scroll",d),function(){return window.removeEventListener("scroll",d)}}),[s,u,c]),Object(m.jsxs)("section",{id:"section-post",children:[Object(m.jsxs)("div",{className:"section-title-post",children:[Object(m.jsx)("img",{className:"img-title-post",src:"logo/icon.png",alt:"logo d'entreprise"}),Object(m.jsx)("h2",{children:"Fil d'actualit\xe9"})]}),!P(j[0])&&j.map((function(e){return Object(m.jsx)(T,{post:e},e.id)}))]})},A=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(null),o=Object(l.a)(r,2),j=o[0],d=o[1],p=Object(n.useState)(),b=Object(l.a)(p,2),O=b[0],h=b[1],f=Object(n.useState)(""),x=Object(l.a)(f,2),v=x[0],N=x[1],y=Object(n.useState)(!1),w=Object(l.a)(y,2),S=w[0],C=w[1],E=Object(g.c)((function(e){return e.userReducer})),U=Object(g.b)();!function(){for(var e=c.split(" "),t=0;t<e.length;t++)if(e[t].includes("https://")){var n=e[t].replace("watch?v=","embed/");N(n.split("&")[0]),e.splice(t,1),a(e.join(" ")),d("")}}();var F=function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c||j||v)){e.next=13;break}return(t=new FormData).append("userId",E.id),t.append("message",c),O&&t.append("image",O),t.append("video",v),e.next=8,U(I(t));case 8:U(k()),D(),C(!1),e.next=14;break;case 13:alert("Veuillez entrer un message");case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){a(""),d(""),N(""),h("")};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("section",{className:"section-newPost",children:Object(m.jsxs)("article",{className:"article-newPost",children:[Object(m.jsx)(u.b,{exact:!0,to:"/profil",children:Object(m.jsx)("img",{className:"picture picture-newPost",alt:"utilisateur_img",src:E.imageUrlUser})}),Object(m.jsx)("input",{name:"message",placeholder:"Nouvelle publication ...",onClick:function(){return C(!S)}})]})}),S&&Object(m.jsx)("section",{children:Object(m.jsx)("article",{className:"article-popup style-popup article-newPost-popup",children:Object(m.jsxs)("div",{className:"container-popup",children:[Object(m.jsx)("span",{className:"close-popup",onClick:function(){return C(!1)},children:"\u2715"}),Object(m.jsxs)("div",{className:"header-popup header-popup-newPost",children:[Object(m.jsx)("img",{alt:"utilisateur img",className:"picture picture-newPost",src:E.imageUrlUser}),Object(m.jsx)("h3",{children:E.username})]}),Object(m.jsxs)("div",{className:"textPopup",children:[Object(m.jsx)("textarea",{value:c,onChange:function(e){return a(e.target.value)}}),j&&Object(m.jsx)("img",{className:"img-newPost-popup",src:j,alt:"post img"}),Object(m.jsxs)("div",{id:"containerVideo-Newpost",children:[v&&Object(m.jsx)("div",{id:"closeVideo-nexPost",children:Object(m.jsx)("span",{onClick:function(){return N("")},children:"\u2715"})}),v&&Object(m.jsx)("iframe",{className:"video-newPost",src:v,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:v})]}),Object(m.jsxs)("div",{className:"container-newPostPopup-img-btn",children:[P(v)&&Object(m.jsxs)("div",{className:"newPostPopup-img",children:[Object(m.jsx)("i",{className:"far fa-image"}),Object(m.jsx)("input",{type:"file",id:"file-upload",name:"image",accept:".jpg, .jpeg, .png",onChange:function(e){return function(e){d(URL.createObjectURL(e.target.files[0])),h(e.target.files[0]),N("")}(e)}})]}),Object(m.jsxs)("div",{className:"container-newPostBtnSendCancel",children:[c||j||v.length>20?Object(m.jsx)("button",{className:"button btnNewPost red-button",onClick:D,children:"Annuler"}):null,Object(m.jsx)("button",{className:"  button btnNewPost green-button",onClick:F,children:"Publier"})]})]})]})]})})})]})},L=function(){return Object(m.jsxs)("main",{id:"main-section",children:[Object(m.jsx)(A,{}),Object(m.jsx)(R,{})]})},M="GET_USER",_="UPDATE_PROFIL",B="UPDATE_IMG",V="DELETE_ACCOUNT",z=function(){var e=Object(g.c)((function(e){return e.userReducer})),t=Object(n.useState)(""),c=Object(l.a)(t,2),a=c[0],r=c[1],o=Object(n.useState)(!1),s=Object(l.a)(o,2),i=s[0],u=s[1],j=Object(g.b)();return Object(m.jsxs)("form",{action:"",className:"form-updatePicture",onSubmit:function(){j(function(e,t){return function(c){var n=new FormData;return n.append("image",t),p()({method:"put",url:"".concat("http://localhost:5000/","api/auth/").concat(e,"/image"),data:n}).then((function(e){c({type:B,payload:n})})).catch((function(e){return console.log(e)}))}}(e.id,a))},children:[Object(m.jsxs)("div",{className:"container-userProfile-picture",children:[Object(m.jsx)("div",{className:"container-account-picture",children:Object(m.jsx)("img",{className:"picture account-picture",src:e.imageUrlUser,alt:"utilisateur img"})}),Object(m.jsxs)("h1",{children:[" ",e.username]}),Object(m.jsx)("label",{htmlFor:"image",children:!1===i&&Object(m.jsx)("div",{className:"buttonChoice-picture",children:Object(m.jsx)("i",{className:"fas fa-camera"})})}),Object(m.jsx)("input",{type:"file",id:"image",name:"image",accept:".jpg, .jpeg, .png",className:"input-file",onChange:function(e){return r(e.target.files[0])},onClick:function(){return u(!i)}})]}),i&&Object(m.jsx)("input",{type:"submit",value:"Envoyer",className:"sendUpdatePicture-user"})]})},G=function(){var e=Object(g.c)((function(e){return e.userReducer})),t=Object(n.useState)(""),c=Object(l.a)(t,2),a=c[0],r=c[1],o=Object(n.useState)(!1),s=Object(l.a)(o,2),i=s[0],u=s[1],j=Object(n.useState)(!1),d=Object(l.a)(j,2),b=d[0],O=d[1],h=Object(g.b)();return Object(m.jsxs)("section",{children:[Object(m.jsxs)("article",{id:"article-account-name-img",children:[" ",Object(m.jsx)(z,{}),Object(m.jsxs)("div",{className:"container-account-description",children:[!1===b&&Object(m.jsxs)("div",{className:"account-description",children:[Object(m.jsx)("label",{htmlFor:"description"}),Object(m.jsxs)("p",{onClick:function(){return O(!b)},children:[e.description," "]})]}),b&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("textarea",{name:"description",id:"description",placeholder:"Description...",defaultValue:e.description,onChange:function(e){return r(e.target.value)}}),Object(m.jsx)("button",{className:"button green-button buttonSend-description",onClick:function(){h(function(e,t){return function(c){return p()({method:"put",url:"".concat("http://localhost:5000/","api/auth/").concat(e),data:{description:t}}).then((function(e){c({type:_,payload:t})})).catch((function(e){return console.log(e)}))}}(e.id,a)),O(!1)},children:"Valider modifications"})]}),Object(m.jsx)("p",{onClick:function(){return u(!i)},children:"Supprimer votre compte"})]})]}),i&&Object(m.jsx)("article",{className:"article-popup  style-popup",children:Object(m.jsxs)("div",{className:"container-popup",children:[Object(m.jsx)("span",{className:"close-popup",onClick:function(){return u(!1)},children:"\u2715"}),Object(m.jsx)("h3",{children:"Confimer la suppression de votre compte"}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{className:"button ",onClick:function(){localStorage.clear(),window.location.href="/",h(function(e){var t=localStorage.getItem("token");return function(c){return p()({method:"delete",url:"".concat("http://localhost:5000/","api/auth/").concat(e),headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){c({type:V,payload:e})})).catch((function(e){return console.log(e)}))}}(e.id))},children:"Confimer"})})]})})]})},H=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(G,{})})},q=function(){return Object(m.jsx)("footer",{children:Object(m.jsx)("p",{children:"Groupomania"})})},J=function(){var e=function(){localStorage.removeItem("token"),localStorage.removeItem("id"),window.location="/"};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("li",{onClick:e,children:Object(m.jsx)("i",{className:"fas fa-power-off"})})})},W=function(){var e=localStorage.getItem("token");return Object(m.jsxs)("header",{children:[Object(m.jsx)(u.b,{exact:!0,to:"/post",children:Object(m.jsx)("div",{className:"header-container-img",children:Object(m.jsx)("img",{src:"logo/icon-left-font-monochrome-white.png",alt:"logo de l'entreprise groupomania",className:"header-img-groupomania"})})}),e?Object(m.jsx)("nav",{children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)(u.b,{exact:!0,to:"/post",children:Object(m.jsx)("i",{className:"fas fa-home"})})}),Object(m.jsx)("li",{children:Object(m.jsx)(u.b,{exact:!0,to:"/profil",children:Object(m.jsx)("i",{className:"fas fa-user"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("i",{className:"fas fa-bell"})}),Object(m.jsx)("li",{children:Object(m.jsx)("i",{className:"fas fa-users"})}),Object(m.jsx)(J,{})]})}):Object(m.jsx)(u.b,{exact:!0,to:"/"})]})},K=function(){return Object(m.jsxs)(u.a,{children:[Object(m.jsx)(W,{}),Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{path:"/",exact:!0,component:x}),Object(m.jsx)(j.b,{path:"/profil",exact:!0,component:H}),Object(m.jsx)(j.b,{path:"/post",exact:!0,component:L}),Object(m.jsx)(j.a,{to:"/"})]}),Object(m.jsx)(q,{})]})},Q=Object(n.createContext)(),X=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),c=t[0],a=t[1],r=Object(g.b)(),o=localStorage.getItem("token"),u=localStorage.getItem("id");return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({method:"get",url:"".concat("http://localhost:5000/","api/auth/").concat(u),headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){a(u)})).catch((function(e){return console.log("No token")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),c&&r(function(e){return function(t){return p.a.get("".concat("http://localhost:5000/","api/auth/").concat(e)).then((function(e){t({type:M,payload:e.data.userId})})).catch((function(e){return console.log(e)}))}}(c))}),[o,u,c,r]),Object(m.jsx)(Q.Provider,{value:c,children:Object(m.jsx)(K,{})})},Y=(c(67),c(36)),Z=c(17),$=c(7),ee={};var te={};var ce="GET_USERS",ne={};var ae=Object(Z.combineReducers)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return t.payload;case _:return Object($.a)(Object($.a)({},e),{},{description:t.payload});case B:return Object($.a)(Object($.a)({},e),{},{data:t.payload});case V:return e.filter((function(e){return e.id!==t.payload.uid}));default:return e}},usersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return t.payload;default:return e}},postReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return t.payload;case N:return e.map((function(e){return e.id===t.payload.postId?Object($.a)(Object($.a)({},e),{},{message:t.payload.message}):e}));case w:return e.map((function(e){return e.id===t.payload.postId?Object($.a)(Object($.a)({},e),{},{image:t.payload.image}):e}));case y:return e.filter((function(e){return e.id!==t.payload.postId}));case S:return e.map((function(e){return e.id===t.payload.postId?Object($.a)(Object($.a)({},e),{},{Comments:e.Comments.map((function(e){return e.id===t.payload.commentId?Object($.a)(Object($.a)({},e),{},{comment:t.payload.comment}):e}))}):e}));case C:return e.map((function(e){return e.id===t.payload.postId?Object($.a)(Object($.a)({},e),{},{comments:e.Comments.filter((function(e){return e.id!==t.payload.commentId}))}):e}));default:return e}}}),re=c(37),oe=c(38),se=c.n(oe),ie=document.getElementById("root"),le=Object(Z.createStore)(ae,Object(re.composeWithDevTools)(Object(Z.applyMiddleware)(Y.a,se.a)));le.dispatch((function(e){return p.a.get("".concat("http://localhost:5000/","api/auth/")).then((function(t){e({type:ce,payload:t.data.users})})).catch((function(e){return console.log(e)}))})),r.a.render(Object(m.jsx)(g.a,{store:le,children:Object(m.jsx)(X,{})}),ie)}},[[68,1,2]]]);
//# sourceMappingURL=main.520ab651.chunk.js.map